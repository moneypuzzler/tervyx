<main>
  <header>
    <h1>TERVYX Protocol v1.0: A Reproducible Governance & Labeling Standard for Health-Information Evidence</h1>
    <p class="meta">
      <strong>Geonyeob Kim</strong> (Independent Researcher)<br/>
      ORCID: <a href="https://orcid.org/0009-0005-7640-2510">0009-0005-7640-2510</a><br/>
      <span class="kicker">Patent notice:</span> Some methods and components presented here are the subject of a pending patent application (see Competing Interests).
    </p>
  </header>

  <section>
    <h2>Abstract</h2>
    <p>
      Online health information suffers from heterogeneous evidence quality, delayed updates, and inconsistent provenance, leaving no widely trusted standard.
      We introduce the <strong>TERVYX Protocol</strong> (Tiered Evidence &amp; Risk Verification sYstem), which makes the entire lifecycle of health claims—generation, evaluation, and citation—reproducible and auditable.
      Its core components are (i) an <strong>Evidence State Vector (ESV)</strong>, (ii) <strong>Gate Governance</strong> with five gates—Natural/Category violation (Φ), Relevance (R), Journal Trust (J), Safety (K), and Exaggeration Language (L)—and (iii) a category-wise probabilistic index, the <strong>TERVYX Evidence Levels (TEL-5)</strong>.
    </p>
    <p>
      Effects are estimated via random-effects meta-analysis using <strong>REML</strong>, then <em>Monte Carlo</em> simulation yields <span class="mono">P(effect &gt; δ)</span> mapped to TEL-5 tiers.
      A <em>Journal-Trust Oracle</em> fuses JCR/SJR percentiles, DOAJ/COPE membership, and Retraction/Predatory/Hijacking signals; critically, Φ or K violations cannot be offset by high J (monotone masking/capping).
      Each entry is built as <span class="mono">evidence.csv → simulation.json → entry.jsonld</span>, including DOI, JSON-LD, BibTeX/CSL, and an audit hash.
      Policy changes are versioned (semver) under RFC-based governance, and only affected subgraphs are recomputed via a <strong>partial re-evaluation DAG</strong>.
    </p>
    <p>
      We pilot five substances (e.g., magnesium glycinate) across sleep, cognition, mental health and renal safety, and evaluate Label Stability, AUROC, Expected Calibration Error (ECE), rebuild latency, and appeals throughput.
      By preserving the patent-backed logical skeleton while providing an evolvable, reproducible standard, TERVYX offers an evidence infrastructure that academia, platforms, and LLMs can co-cite.
    </p>
    <p class="small"><strong>Keywords:</strong> health information, meta-analysis, Monte Carlo, journal trust, governance, reproducibility, encyclopedia, LLM</p>
  </section>

  <section>
    <h2>1. Introduction</h2>
    <p>
      Public health claims online are undermined by conflicting narratives, exaggeration, and opaque sources. Existing assessment systems suffer from
      (i) <em>one-dimensional scoring</em> of multi-faceted interventions; (ii) <em>subjective dependence</em> on expert judgment; (iii) <em>information asymmetry</em> between meta-analytic complexity and lay accessibility; and (iv) <em>pseudo-medicine co-mingling</em> with scientific evidence.
      A standard that quantifies evidence strength/uncertainty, safety, and source quality—then distributes labels in an auditable form—is missing. This paper proposes the <strong>TERVYX Protocol</strong> to fill this gap.
    </p>
    <h3>1.1 Goals</h3>
    <ul>
      <li><strong>Reproducibility:</strong> identical data, policy, and seed yield identical results.</li>
      <li><strong>Efficiency:</strong> partial re-evaluation via a dependency DAG on data/policy changes.</li>
      <li><strong>Interoperability:</strong> machine-ready outputs (DOI/JSON-LD/BibTeX) for humans and LLMs.</li>
      <li><strong>Transparency:</strong> publish all decision rationales and reliability metrics for audit.</li>
    </ul>
  </section>

  <section>
    <h2>2. Related Work</h2>
    <p>
      Reporting standards such as PRISMA guide systematic reviews but lack live labeling, APIs, and cryptographic auditing.
      Fact-checking and moderation often remain qualitative. TERVYX combines <em>probabilistic effect estimation</em>, <em>multi-gate governance</em>, a <em>Journal-Trust Oracle</em>, and a <em>reproducible build pipeline</em> into one protocol.
    </p>
  </section>

  <section>
    <h2>3. Core Concepts</h2>
    <h3>3.1 Evidence State Vector (ESV)</h3>
    <p>We normalize the atomic evidence unit as:</p>
<pre><code class="language-json">{
  "study_id": "string",
  "year": 2020,
  "design": "RCT|cohort|case-control|...",
  "effect_type": "SMD|MD|OR|RR",
  "effect_point": 0.18,
  "ci_low": 0.02,
  "ci_high": 0.34,
  "n_treat": 60,
  "n_ctrl": 58,
  "risk_of_bias": "low|some|high",
  "doi": "10.xxxx/abc",
  "journal_id": "sleep_med"
}</code></pre>
    <p class="small"><span class="mono">journal_id</span> connects to the Journal-Trust Oracle.</p>

<h3>3.2 Gate Governance (GGP)</h3>
<p>We evaluate claim <span class="mono">c</span> with evidence <span class="mono">E</span> through five sequential gates: <strong>Φ → R → J → K → L</strong>.</p>
<ul>
  <li><strong>Φ (Natural/Category):</strong> physiological impossibility / category misrouting ⇒ <span class="pill tier-black">FAIL</span>.</li>
  <li><strong>R (Relevance):</strong> routing fit between claim and category (below threshold ⇒ <span class="pill tier-red">AMBER</span>↓ or exclude).</li>
  <li><strong>J (Journal Trust):</strong> J-Oracle score; predatory/hijacked/retracted ⇒ <span class="mono">J-BLACK = 0</span>.</li>
  <li><strong>K (Safety):</strong> absolute caps for contraindications and serious adverse events.</li>
  <li><strong>L (Exaggeration):</strong> “cure/permanent/instant/miracle/risk-free” triggers corrective down-shifts.</li>
</ul>
<div class="callout"><strong>Monotone invariant:</strong> Φ or K violations cannot be offset by J; PASS cannot be upgraded under Φ/K.</div>

<div class="fig">
  <!-- Figure 1: High-level pipeline (inline SVG) -->
  <svg viewBox="0 0 820 150" width="100%" height="150" role="img" aria-label="TERVYX pipeline">
    <defs>
      <style>
        .bx{ fill:#fafafa; stroke:#333; }
        .tx{ font: 12px 'Times New Roman', serif; fill:#111; }
        .ar{ marker-end:url(#mA); stroke:#333; fill:none; }
      </style>
      <marker id="mA" orient="auto" markerWidth="6" markerHeight="6" refX="5.2" refY="3">
        <path d="M0,0 L6,3 L0,6 z" fill="#333"/>
      </marker>
    </defs>
    <rect class="bx" x="10"  y="30" width="170" height="50" rx="6"/>
    <text class="tx" x="95" y="60" text-anchor="middle">Evidence State Vector (ESV)</text>

    <rect class="bx" x="210" y="30" width="220" height="50" rx="6"/>
    <text class="tx" x="320" y="48" text-anchor="middle">Gate Governance (GGP)</text>
    <text class="tx" x="320" y="64" text-anchor="middle">Φ → R → J → K → L</text>

    <rect class="bx" x="460" y="30" width="140" height="50" rx="6"/>
    <text class="tx" x="530" y="48" text-anchor="middle">REML + MC</text>
    <text class="tx" x="530" y="64" text-anchor="middle">P(effect &gt; δ)</text>

    <rect class="bx" x="630" y="30" width="180" height="50" rx="6"/>
    <text class="tx" x="720" y="48" text-anchor="middle">TEL-5 Label</text>
    <text class="tx" x="720" y="64" text-anchor="middle">PASS / AMBER / FAIL</text>

    <line class="ar" x1="180" y1="55" x2="210" y2="55"/>
    <line class="ar" x1="430" y1="55" x2="460" y2="55"/>
    <line class="ar" x1="600" y1="55" x2="630" y2="55"/>

    <rect class="bx" x="260" y="100" width="300" height="38" rx="6"/>
    <text class="tx" x="410" y="124" text-anchor="middle">Partial Re-evaluation DAG (recompute affected subgraphs only)</text>
  </svg>
  <div class="caption">Figure 1. Gate Governance Protocol (Φ → R → J → K → L). Deterministic Φ/K gates enforce <em>safety-first monotonicity</em>; probabilistic R/J/L signals operate within those bounds under a versioned governance policy.</div>
</div>

<h4>3.2.1 Exaggeration Language (L) — bilingual patterns</h4>
<table>
  <thead><tr><th>Forbidden</th><th>Korean patterns</th><th>English patterns</th><th>Exceptions</th></tr></thead>
  <tbody>
    <tr><td>Cure / Complete cure</td><td><code>완전(히)? (치료|완치)</code></td><td><code>\b(cure|completely\s*cured|permanent\s*cure)\b</code></td><td>“adjuvant to treatment”, “helps with”</td></tr>
    <tr><td>Instant</td><td><code>즉시|바로|당장</code></td><td><code>\b(instant(ly)?|immediate(ly)?)\b</code></td><td>“gradual”, “over weeks”</td></tr>
    <tr><td>Panacea</td><td><code>모든 질병|만병통치|만능</code></td><td><code>\b(cure[-\s]?all|panacea|works\s*for\s*everything)\b</code></td><td>—</td></tr>
    <tr><td>No side effects</td><td><code>부작용 (전혀 )?없(음|다)</code></td><td><code>\b(no\s*side\s*effects|risk[-\s]?free)\b</code></td><td>“few side effects”, “safety established”</td></tr>
    <tr><td>World-first</td><td><code>세계 최초|의학계 혁신</code></td><td><code>\b(world[-\s]?first|medical\s*breakthrough)\b</code></td><td>“recent study”, “novel approach”</td></tr>
  </tbody>
</table>

<h3>3.3 Probabilistic Effects and TEL-5 (TERVYX Evidence Levels)</h3>
<p>
  We estimate τ² via REML, then draw Monte Carlo samples of the meta-analytic mean. All effects are transformed so that <em>benefit is positive</em> (e.g., PSQI <em>decrease</em> ⇒ multiply by −1).
</p>
<table>
  <thead><tr><th>P(effect &gt; δ)</th><th>TEL-5 tier</th><th>Final label</th><th>Interpretation</th></tr></thead>
  <tbody>
    <tr><td class="center">≥ 0.80</td><td><span class="pill tier-gold">Gold</span></td><td><strong>PASS</strong></td><td>High confidence</td></tr>
    <tr><td class="center">0.60–0.80</td><td><span class="pill tier-silver">Silver</span></td><td><strong>PASS</strong></td><td>Moderate confidence</td></tr>
    <tr><td class="center">0.40–0.60</td><td><span class="pill tier-bronze">Bronze</span></td><td><strong>AMBER</strong></td><td>Low confidence</td></tr>
    <tr><td class="center">0.20–0.40</td><td><span class="pill tier-red">Red</span></td><td><strong>AMBER</strong></td><td>Very low confidence</td></tr>
    <tr><td class="center">&lt; 0.20 or Φ/K violation</td><td><span class="pill tier-black">Black</span></td><td><strong>FAIL</strong></td><td>Inappropriate/Risky</td></tr>
  </tbody>
</table>

<h3>3.4 Partial Re-evaluation DAG</h3>
<p>We define a dependency graph over category thresholds <span class="mono">δ</span>, journal-trust snapshots, and entry evidence tables; changes propagate only to affected subgraphs.</p>
<div class="fig">
  <!-- Figure 2: DAG (inline SVG) -->
  <svg viewBox="0 0 820 180" width="100%" height="180" role="img" aria-label="Partial Re-evaluation DAG">
    <defs>
      <style>
        .bx{ fill:#fafafa; stroke:#333; }
        .tx{ font: 12px 'Times New Roman', serif; fill:#111; }
        .ar{ marker-end:url(#mB); stroke:#333; fill:none; }
      </style>
      <marker id="mB" orient="auto" markerWidth="6" markerHeight="6" refX="5.2" refY="3">
        <path d="M0,0 L6,3 L0,6 z" fill="#333"/>
      </marker>
    </defs>
    <rect class="bx" x="20" y="20" width="200" height="46" rx="6"/>
    <text class="tx" x="120" y="42" text-anchor="middle">journal_trust@2025-10-05</text>

    <rect class="bx" x="260" y="20" width="160" height="46" rx="6"/>
    <text class="tx" x="340" y="42" text-anchor="middle">entry_sleep/v1</text>

    <rect class="bx" x="460" y="20" width="160" height="46" rx="6"/>
    <text class="tx" x="540" y="42" text-anchor="middle">simulation.json</text>

    <rect class="bx" x="660" y="20" width="140" height="46" rx="6"/>
    <text class="tx" x="730" y="42" text-anchor="middle">entry.jsonld</text>

    <line class="ar" x1="220" y1="43" x2="260" y2="43"/>
    <line class="ar" x1="420" y1="43" x2="460" y2="43"/>
    <line class="ar" x1="620" y1="43" x2="660" y2="43"/>

    <rect class="bx" x="260" y="110" width="160" height="46" rx="6"/>
    <text class="tx" x="340" y="132" text-anchor="middle">entry_cogni/v1</text>
    <line class="ar" x1="120" y1="66" x2="120" y2="110"/>
    <line class="ar" x1="120" y1="110" x2="260" y2="133"/>
  </svg>
  <div class="caption">Figure 2. Only the descendants of modified nodes are recomputed under a versioned governance snapshot (deterministic reproducibility across rebuilds).</div>
</div>
<p class="small"><strong>Propagation rules (formal):</strong> (i) Δ(journal_trust@t) ⇒ recompute all dependent entries; (ii) Δ(evidence.csv) ⇒ recompute that entry only; (iii) Δ(δ) ⇒ recompute all entries in the category and invalidate upstream caches.</p>

  </section>

  <section>
    <h2>4. Journal-Trust Oracle (J*)</h2>
    <h3>4.1 Signal Fusion</h3>
    <p>We fuse normalized JCR/SJR percentiles (<span class="mono">IF_z, SJR_z ∈ [0,1]</span>) with binary DOAJ/COPE and blacklist signals (Retraction/Predatory/Hijacked).</p>
    <h3>4.1.1 Normalization and BLACK pre-mask</h3>
<pre><code class="language-text"># Pre-mask (BLACK triggers)
if (Retraction or Predatory or Hijacked):
    J* = 0.0      # BLACK → evidence excluded
else:
    # Raw linear combination (policy-tunable weights)
    J_raw = 0.35*IF_z + 0.35*SJR_z + 0.15*DOAJ + 0.05*COPE \
            - 0.50*Retraction - 0.50*Predatory - 0.30*Hijacked
    # Calibrated squashing + clipping
    J* = clip( sigmoid(a * J_raw + b), 0.0, 1.0 )  # a,b fixed per policy version</code></pre>

<h3>4.2 Snapshot Management</h3>

<pre><code class="language-json">{
  "snapshot_date": "2025-10-05",
  "snapshot_hash": "0x4d3c2b1a0f9e8d7c (first 16 hex of SHA-256 over sorted journals)",
  "signer": "ed25519:0x...",
  "data_sources": {
    "jcr_update": "2025-06-15",
    "sjr_update": "2025-07-20",
    "doaj_scraped": "2025-10-01",
    "predatory_lists": ["Beall", "Cabell", "Think-Check-Submit"]
  }
}</code></pre>

  </section>

  <section>
    <h2>5. Data Schema and Interfaces</h2>
    <h3>5.1 Input: <span class="mono">evidence.csv</span></h3>
    <table>
      <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>study_id</td><td>string</td><td>Study identifier</td></tr>
        <tr><td>year</td><td>integer</td><td>Publication year</td></tr>
        <tr><td>design</td><td>string</td><td>Study design (RCT/cohort/etc.)</td></tr>
        <tr><td>effect_type</td><td>string</td><td>Effect size type (SMD/MD/OR/RR)</td></tr>
        <tr><td>effect_point</td><td>float</td><td>Point estimate</td></tr>
        <tr><td>ci_low</td><td>float</td><td>95% CI lower bound</td></tr>
        <tr><td>ci_high</td><td>float</td><td>95% CI upper bound</td></tr>
        <tr><td>n_treat</td><td>integer</td><td>Treatment sample size</td></tr>
        <tr><td>n_ctrl</td><td>integer</td><td>Control sample size</td></tr>
        <tr><td>risk_of_bias</td><td>string</td><td>low / some / high</td></tr>
        <tr><td>doi</td><td>string</td><td>DOI</td></tr>
        <tr><td>journal_id</td><td>string</td><td>Journal identifier (links to J-Oracle)</td></tr>
      </tbody>
    </table>

<h3>5.2 Output Artifacts</h3>
<h4><span class="mono">simulation.json</span></h4>

<pre><code class="language-json">{
  "seed": 20251005,
  "n_draws": 10000,
  "tau2_method": "REML",
  "delta": 0.20,
  "P_effect_gt_delta": 0.683,
  "mu_CI95": [0.122, 0.318],
  "I2": 12.4,
  "tau2": 0.009,
  "environment": "Python 3.11, NumPy 1.24.0, SciPy 1.11.0",
  "policy_fingerprint": "0x4d3c2b1a0f9e8d7c"
}</code></pre>

<h4><span class="mono">entry.jsonld</span></h4>

<pre><code class="language-json">{
  "@context": "https://schema.org/",
  "@type": "Dataset",
  "id": "nutrient:magnesium-glycinate:sleep:v1",
  "title": "Magnesium Glycinate — Sleep",
  "category": "sleep",
  "tier": "Silver",
  "label": "PASS",
  "P_effect_gt_delta": 0.683,
  "gate_results": { "phi": "PASS", "r": "HIGH", "j": 0.78, "k": "PASS", "l": "PASS" },
  "evidence_summary": { "n_studies": 3, "total_n": 502, "I2": 12.4, "tau2": 0.009 },
  "policy_refs": { "tel5_levels": "v1.2.0", "monte_carlo": "v1.0.1-reml-grid", "journal_trust": "2025-10-05" },
  "preferred_citation": "Kim, G. (2025). TERVYX Protocol...",
  "bibtex": "@dataset{kim2025tervyx, ...}",
  "csl_json": { "...": "..." },
  "doi": "10.5281/zenodo.17364486",
  "version": "v1",
  "audit_hash": "0x2f8a9b1c3d4e5f67",
  "llm_hint": "TEL-5=Silver, PASS; Φ/K no violations; sleep δ=0.20; REML+MC",
  "policy_fingerprint": "0x4d3c2b1a0f9e8d7c",
  "tier_label_system": "TEL-5"
}</code></pre>

<p class="small">All endpoints support content negotiation (<span class="mono">Accept: application/ld+json | x-bibtex | csl+json</span>).</p>

  </section>

  <section>
    <h2>6. Methods</h2>
    <h3>6.1 Random-Effects (REML) + Monte Carlo</h3>
    <p>
      We prefer <strong>REML</strong> over DerSimonian–Laird for τ² estimation. <em>Policy–evidence separation</em> is enforced: only policy changes (δ, gate rules) or data changes trigger recomputation.
    </p>
    <h4>Algorithm 1. REML-based MC meta-analysis (unified benefit direction)</h4>
<pre><code>1) Preprocess: CI→SE, unify direction (benefit = positive)
   - OR/RR: log-transform; SE = (log(CI_high)-log(CI_low)) / (2×1.96)
   - SMD/MD: linear; SE = (CI_high - CI_low) / (2×1.96)
   - Apply benefit_direction ∈ {+1,−1} to y

2. REML τ²

   * w_i = 1/(SE_i² + τ²), μ̂ = Σ(w_i y_i)/Σ(w_i), Var(μ̂) = 1/Σ(w_i)
   * I² = max(0,(Q−df)/Q)×100

3. Monte Carlo (N=10,000)

   * μ^(k) ~ Normal(μ̂, √Var(μ̂)), k=1..N
   * P(μ>δ) = mean[ μ^(k) > δ ]
   * 95% PI = μ̂ ± 1.96 × √(τ² + Var(μ̂))

4. TEL-5 mapping and label

   * P → {Gold, Silver, Bronze, Red, Black}
   * Φ/K/L violations cap label (J cannot offset)</code></pre>
    <h4>6.1.2 Reference Implementation (Python, reproducible — TERVYX/TEL-5)</h4>
    <pre><code class="language-python">
    # 6.1.2 Reference Implementation (Python, reproducible — TERVYX/TEL-5)
# REML + Monte Carlo meta-analysis (unified benefit direction)
# Example: Sleep category (SMD; PSQI decrease is beneficial → flip sign)

import numpy as np, math
from typing import Tuple

class MCConfig:
    seed = 20251005
    n_draws = 10000
    delta = 0.20
    benefit_direction = -1  # PSQI decrease → +benefit after flip

def ci_to_se(effect_type: str, y: float, lo: float, hi: float) -> Tuple[float, float]:
    """Convert 95% CI to standard error; log-transform for OR/RR."""
    if effect_type.upper() in ("OR","RR"):
        y = math.log(y)
        se = (math.log(hi) - math.log(lo)) / (2.0 * 1.96)
    else:
        se = (hi - lo) / (2.0 * 1.96)
    return y, se

def restricted_nll(tau2: float, y: np.ndarray, v: np.ndarray) -> float:
    """Restricted (REML) negative log-likelihood for random-effects."""
    vt = v + tau2
    w = 1.0 / vt
    mu = np.sum(w * y) / np.sum(w)
    return 0.5 * (np.sum(np.log(vt)) + math.log(np.sum(w)) + np.sum((y - mu) ** 2 * w))

def reml_tau2(y: np.ndarray, v: np.ndarray, mult: float = 100.0) -> float:
    """1D grid + local refinement to find τ² ≥ 0 that minimizes REML NLL."""
    vmax = float(np.max(v))
    upper = max(1e-12, vmax * mult)
    grid = [0.0] + list(np.geomspace(1e-10, upper, 400))
    nll = [restricted_nll(t, y, v) for t in grid]
    idx = int(np.argmin(nll))
    l = grid[max(0, idx - 2)]
    r = grid[min(len(grid) - 1, idx + 2)]
    fine = np.linspace(l, r, 400)
    fine_nll = [restricted_nll(t, y, v) for t in fine]
    return max(0.0, float(fine[int(np.argmin(fine_nll))]))

# --- Example evidence (SMD) ---
evidence = [
    {"effect_type":"SMD","effect_point":-0.32,"ci_low":-0.55,"ci_high":-0.09},
    {"effect_type":"SMD","effect_point":-0.15,"ci_low":-0.38,"ci_high": 0.08},
    {"effect_type":"SMD","effect_point":-0.28,"ci_low":-0.51,"ci_high":-0.05},
]

# --- Pipeline (deterministic) ---
cfg = MCConfig()
np.random.seed(cfg.seed)

ys, ses = [], []
for r in evidence:
    y = r["effect_point"]
    y, se = ci_to_se(r["effect_type"], y, r["ci_low"], r["ci_high"])
    y *= cfg.benefit_direction  # unify so that benefit is positive
    ys.append(y); ses.append(se)

y = np.array(ys, dtype=float)
v = np.array(ses, dtype=float) ** 2

tau2 = reml_tau2(y, v, 100.0)
w = 1.0 / (v + tau2)
mu_hat = float(np.sum(w * y) / np.sum(w))
var_mu = float(1.0 / np.sum(w))

rng = np.random.default_rng(cfg.seed)
draws = rng.normal(mu_hat, math.sqrt(var_mu), cfg.n_draws)
P = float(np.mean(draws > cfg.delta))

# TEL-5 tier + final label
if P >= 0.80:
    tier = "Gold"; label = "PASS"
elif P >= 0.60:
    tier = "Silver"; label = "PASS"
elif P >= 0.40:
    tier = "Bronze"; label = "AMBER"
elif P >= 0.20:
    tier = "Red"; label = "AMBER"
else:
    tier = "Black"; label = "FAIL"

print({
    "P_effect_gt_delta": round(P, 3),
    "tier": tier,          # TEL-5
    "label": label,        # PASS / AMBER / FAIL (subject to Φ/K caps outside this demo)
    "mu_hat": round(mu_hat, 3),
    "tau2": round(tau2, 6),
})

    </code></pre>
    <h4>6.1.3 Example Result (Magnesium Glycinate — Sleep)</h4>

<pre><code class="language-text">τ² = 0.009; μ̂ ≈ +0.24; Var(μ̂) ≈ 0.0032; I² = 12.4%
P(μ>δ) ≈ 0.683 → TEL-5 tier: Silver → Final label: PASS
95% PI ≈ [0.12, 0.32]; 95% CI ≈ [0.12, 0.32]</code></pre>

<h4>6.2 Label Rules (5-tier)</h4>
<ul>
  <li><strong>PASS</strong>: <span class="mono">P ≥ 0.60</span> (Gold/Silver) and no Φ/K violation; J* threshold met.</li>
  <li><strong>AMBER</strong>: <span class="mono">0.20 ≤ P &lt; 0.60</span> (Bronze/Red) or gate warnings.</li>
  <li><strong>FAIL</strong>: <span class="mono">P &lt; 0.20</span> (Black) or any Φ/K violation; J-BLACK.</li>
</ul>

  </section>

  <section>
    <h2>7. Implementation</h2>
    <h3>7.1 Repository Layout</h3>
<pre><code>/TERVYX
├─ protocol/
│  ├─ schemas/                # JSON-Schema (entry, simulation, citations)
│  └─ taxonomy/               # tel5_categories@v1.0.0.json (TEL-5 fixed)
├─ entries/
│  └─ nutrient/magnesium-glycinate/sleep/v1/
│     ├─ entry.jsonld         # Final output
│     ├─ simulation.json      # MC summary
│     ├─ evidence.csv         # Evidence table
│     └─ citations.json       # DOI/PMID/bibliography
├─ engine/
│  ├─ mc_meta.py              # Random-effects + Monte Carlo
│  ├─ tel5_rules.py           # P(effect>δ) → TEL-5 tier
│  ├─ gates.py                # Φ/R/J/K/L gates
│  └─ schema_validate.py      # Schema validation
└─ .github/workflows/ci.yml   # CI pipeline</code></pre>

<h3>7.2 CI Pipeline</h3>

<pre><code class="language-yaml">name: TERVYX Build Pipeline
on: [pull_request, workflow_dispatch, schedule]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with: { python-version: '3.11' }
      - run: pip install -r requirements.txt

      - name: Validate Schemas
        run: python -m engine.schema_validate

      - name: Monte Carlo Simulation
        run: python -m engine.mc_meta --all

        # TEL-5 rule application
      - name: Apply TEL-5 Rules
        run: python -m engine.tel5_rules --apply

      - name: Journal-Trust Snapshot
        run: python -m engine.journal_trust --snapshot protocol/journal_trust/

      - name: Gate Governance Check
        run: python -m engine.gates --validate-all

      - name: Reproducibility Check
        run: python scripts/repro_check.py

      - name: Build Artifacts (JSON-LD/BibTeX/CSL)
        run: python scripts/build_artifacts.py

      - name: Generate DOI Metadata
        run: python scripts/zenodo_metadata.py

      - name: Audit Hash Chain
        run: python scripts/audit_chain.py --verify</code></pre>

<h3>7.3 Security</h3>
<p>No secrets are committed to the public repository. Crawling/extraction runs on private workers; public updates are merged via PR.</p>

  </section>

  <section>
    <h2>8. Evaluation</h2>
    <h3>8.1 Pilot</h3>
    <p><strong>Entries:</strong> magnesium glycinate, omega-3, saw palmetto, melatonin, creatine.<br/>
       <strong>Categories:</strong> sleep, cognition, mental health, renal safety, cardiovascular.</p>

<h3>8.2 Metrics</h3>
<ul>
  <li>Accuracy/AUROC; Macro-F1 (with emphasis on FAIL detection)</li>
  <li>Calibration (ECE/Brier)</li>
  <li>Label stability (±1 volatility)</li>
  <li>Rebuild latency/cost</li>
  <li>Appeals SLA</li>
</ul>

<h3>8.3 Expected Outcomes (pilot snapshot)</h3>
<table>
  <thead><tr><th>Substance</th><th>Category</th><th>P(effect&gt;δ)</th><th>Tier</th><th>Label</th><th>Limiting factor</th></tr></thead>
  <tbody>
    <tr><td>Magnesium glycinate</td><td>Sleep</td><td>0.683</td><td>Silver</td><td><strong>PASS</strong></td><td>Moderate evidence</td></tr>
    <tr><td>Magnesium glycinate</td><td>Cognition</td><td>0.340</td><td>Red</td><td><strong>AMBER</strong></td><td>Low confidence</td></tr>
    <tr><td>Magnesium glycinate</td><td>Renal improvement</td><td>N/A</td><td>Black</td><td><strong>FAIL</strong></td><td>Φ violation (category misrouting)</td></tr>
    <tr><td>Omega-3</td><td>Cardiovascular</td><td>0.820</td><td>Gold</td><td><strong>PASS</strong></td><td>High-quality evidence</td></tr>
    <tr><td>Melatonin</td><td>Sleep</td><td>0.915</td><td>Gold</td><td><strong>PASS</strong></td><td>Strong evidence</td></tr>
  </tbody>
</table>

<h3>8.3.1 What-if / MC proof stub</h3>

<pre><code class="language-json">{
  "what_if": [
    {
      "claim_text": "Magnesium glycinate improves renal function",
      "intended_category": "renal_safety",
      "gate_outcome": { "phi": "BLACK", "r": "LOW", "j": "N/A" },
      "label_if_asserted": "FAIL",
      "reason_codes": ["Φ: category misrouting", "J: no admissible evidence"],
      "evidence_required_to_reconsider": [
        "Large RCT in renal disease (n≥500)",
        "Objective endpoints (eGFR) with p<0.05",
        "Whitelist nephrology journal",
        "12+ weeks with safety monitoring"
      ]
    }
  ]
}</code></pre>

  </section>

  <section>
    <h2>9. Limitations and Ethics</h2>
    <ul>
      <li>Coverage of non-English literature; observational biases; value choices in MCID δ.</li>
      <li>To prevent misuse, labels/badges (SVG) include DOI signatures and verification scripts.</li>
      <li>Commercial use follows a usage guide; public-interest research gets permissive access.</li>
    </ul>
    <div class="callout"><strong>Medical disclaimer:</strong> This work does not constitute medical advice; it does not replace clinical diagnosis or treatment.</div>
  </section>

  <section>
    <h2>10. Conclusion</h2>
    <p>
      TERVYX integrates quantification, labeling, and auditability into a standard that preserves patent-level logic while enabling evolution.
      The protocol aims to serve as a de facto citation layer for academia, media, platforms, and LLMs—anchored by open governance and reproducible artifacts.
    </p>
  </section>

  <section>
    <h2>Data &amp; Code Availability</h2>
    <p>Protocol, engine, entries, and schemas will be released with DOIs. All <span class="mono">/entry/{id}</span> responses include <span class="mono">preferred_citation, bibtex, csl_json, doi, version, audit_hash, llm_hint, policy_fingerprint</span>.</p>
    <ul class="small">
      <li><strong>Code repository:</strong> GitHub (MIT License)</li>
      <li><strong>Data repository:</strong> Zenodo (CC BY 4.0)</li>
      <li><strong>Protocol DOI:</strong> 10.5281/zenodo.17364486</li>
      <li><strong>Software DOI:</strong> Pending (GitHub release in progress)</li>
    </ul>
  </section>

  <section>
    <h2>Competing Interests</h2>
    <p>
      The author is the applicant/inventor of “Verification of Non-scientific Health-Information Claims — GGP-based Hybrid Control,”
      filed in Korea.
    </p>
    <ul>
      <li><strong>Application no.:</strong> 10-2025-0143351 (KR)</li>
      <li><strong>Filing date:</strong> 2025-10-01</li>
      <li><strong>Receipt no.:</strong> 1-1-2025-1119765-45</li>
      <li><strong>DAS Access:</strong> F05F</li>
      <li><strong>ORCID:</strong> 0009-0005-7640-2510</li>
    </ul>
    <p>This did not unduly influence the interpretation of results.</p>
  </section>

  <section>
    <h2>Ethics Approval</h2>
    <p>No human subjects or personal data were collected; only public literature and metadata were used.</p>
  </section>

  <section>
    <h2>Acknowledgments</h2>
    <p>We thank the open-access data/journal policies and the broader open ecosystem.</p>
  </section>

  <!-- ===== Editorial Updates (8 items) — appended without altering core claims ===== -->

  <section id="v1-0-editorial-updates" class="pagebreak">
    <h2>Editorial Updates for TERVYX v1.0 (Superseding Notes)</h2>
    <p>The following subsections harden reproducibility and governance, and <em>supersede</em> the corresponding earlier paragraphs where applicable, without changing the v1.0 method claims.</p>

<section id="terminology-update">
  <h3>1) Terminology Clarification — Governance Module</h3>
  <p><strong>Governance Module (replacing “control means”).</strong> A software module that ingests the Evidence State Vector (ESV) and a versioned policy, and emits control signals (e.g., thresholds, weights, search depth) to the gates. The module may be implemented as a finite-state policy, a rule engine, or a compiled decision table, but is referenced here purely as a <em>governance module</em> to avoid ambiguity.</p>
</section>

<section id="policy-fingerprint">
  <h3>2) Policy Fingerprint and Reproducible Governance</h3>
  <p>Every build of TERVYX publishes a <strong>policy fingerprint</strong>, a deterministic digest that uniquely identifies the active governance state at evaluation time:</p>
  <pre><code>policy_fingerprint = compact16(
    SHA256(priority_lattice || invariants || journal_trust_snapshot_hash ||
           phi_ruleset_hash || l_gate_model_hash)
)</code></pre>
  <p>The compact 0x-prefixed value (first 16 hex characters of the full digest) is recorded alongside the full fingerprint and audit hash in all artifacts (<span class="mono">simulation.json</span>, <span class="mono">entry.jsonld</span>, <span class="mono">AUDIT_LOG.jsonl</span>). This provides a stable linkage between a decision and the exact governance configuration that produced it while keeping artifacts concise.</p>
</section>

<section id="audit-hash-payload">
  <h3>3) Audit Hash &amp; Payload</h3>
  <p><strong>Audit Hash &amp; Payload.</strong> For each finalized decision, TERVYX emits an append-only audit record comprising: (i) the decision label and TEL-5 tier; (ii) the full ESV snapshot; (iii) the active <code>policy_fingerprint</code>; (iv) identifiers of evidence used (e.g., DOI, PMID, or repository IDs); and (v) provenance for external snapshots (e.g., <code>journal_trust@YYYY-MM-DD</code>). The audit record is serialized and hashed with SHA-256 to produce an <code>audit_hash</code>. Chaining audit hashes across updates yields a tamper-evident ledger of decisions over time.</p>
</section>

<section id="journal-trust-clarification">
  <h3>4) Journal-Trust Oracle Clarification</h3>
  <p><strong>Safety-first monotonicity.</strong> Blacklist signals (retraction, predatory, hijacked) hard-cap or nullify contributions to ensure Φ/K precedence; whitelist/ethics signals act only as secondary positives and never override Φ/K outcomes. The Oracle is versioned as a dated snapshot and referenced in all artifacts for auditability.</p>
</section>

<section id="optional-reserved-fields">
  <h3>5) Optional (reserved) fields for forward compatibility</h3>
  <p>Defined for schema stability and may be omitted in TERVYX v1.0 outputs:</p>
  <ul>
    <li><code>policy_fingerprint</code> (string): Governance state digest (see above).</li>
    <li><code>amber_protocol</code> (object): AMBER handling metadata (e.g., <code>reason_codes</code>, <code>retry_after</code>, <code>required_evidence</code>).</li>
    <li><code>j_vector</code> (object): Structured summary of evidence certainty dimensions; not populated in v1.0.</li>
    <li><code>evidence_iris</code> (array&lt;string&gt;): Persistent identifiers for structured evidence facts or records.</li>
  </ul>
  <p>Consumers MUST ignore absent fields and preserve unknown fields.</p>
</section>

<section id="limitations-future-work">
  <h3>6) Limitations and Future Work (concept-level)</h3>
  <ol>
    <li><strong>Evidence certainty structuring.</strong> Future releases may expose a multi-dimensional summary of evidence certainty (e.g., risk of bias, inconsistency, indirectness, imprecision, publication bias) as a structured vector for downstream policy, while keeping v1.0’s scalar outputs stable for compatibility.</li>
    <li><strong>Governed scientific knowledge base for Φ.</strong> The Φ-gate ruleset may be surfaced as a formally versioned, community-reviewed knowledge base to strengthen transparency and traceability of principle checks.</li>
    <li><strong>Explainable linguistic signals.</strong> The L-gate may report a compact, interpretable feature summary to improve auditability of language-related boundary signals.</li>
    <li><strong>Operational hardening.</strong> Continued investment in governance-as-code (policy regression tests, deterministic packaging) will further reduce rebuild latency and improve label stability under snapshot updates.</li>
  </ol>
</section>

<section id="figure-caption-note">
  <h3>7) Figure Caption Update</h3>
  <p><strong>Figure&nbsp;1 (revised caption).</strong> Gate Governance Protocol (Φ → R → J → K → L). Deterministic Φ/K gates enforce <em>safety-first monotonicity</em>; probabilistic R/J/L signals operate within those bounds under a versioned governance policy.</p>
</section>

<section id="references-additions">
  <h3>8) References — Additions for Standards &amp; Methods</h3>
  <ul>
    <li>Page MJ, McKenzie JE, Bossuyt PM, et&nbsp;al. (2021). The PRISMA 2020 statement. <em>BMJ</em>, 372:n71.</li>
    <li>Higgins JPT, Thomas J, Chandler J, et&nbsp;al., eds. (2023). <em>Cochrane Handbook for Systematic Reviews of Interventions</em>, v6.3 or later.</li>
    <li>Guyatt G, Oxman AD, Vist G, et&nbsp;al. (2008). GRADE: an emerging consensus on rating quality of evidence. <em>BMJ</em>, 336:924–926; and subsequent GRADE series.</li>
    <li>Viechtbauer W. (2010). Conducting meta-analyses in R with the metafor package. <em>J Stat Softw</em>, 36(3):1–48.</li>
    <li>Hartung J, Knapp G (2001); Sidik K, Jonkman JN (2005). Adjustments for random-effects meta-analysis (HKSJ).</li>
    <li>Moed HF. (2010). SNIP: A field-normalized citation impact indicator. <em>J Informetrics</em>, 4(2):265–277.</li>
    <li>González-Pereira B, Guerrero-Bote VP, Moya-Anegón F. (2010). SCImago Journal Rank (SJR). <em>Scientometrics</em>, 82: 517–532.</li>
    <li>Committee on Publication Ethics (COPE). Principles &amp; resources. <em>COPE</em>.</li>
    <li>Directory of Open Access Journals (DOAJ). Inclusion criteria &amp; transparency principles. <em>DOAJ</em>.</li>
    <li>Sporny M, Longley D, Kellogg G., eds. (2020). <em>JSON-LD 1.1</em>, W3C Recommendation.</li>
    <li>Lewis P, Perez E, Piktus A, et&nbsp;al. (2020). Retrieval-Augmented Generation. <em>NeurIPS</em>.</li>
    <li>Lazer DMJ, Baum MA, Benkler Y, et&nbsp;al. (2018). The science of fake news. <em>Science</em>, 359(6380):1094–1096.</li>
  </ul>
</section>

  </section>
  <!-- ===== End Editorial Updates ===== -->

  <section class="pagebreak">
    <h2>References</h2>
    <ol>
      <li>Moher D, Liberati A, Tetzlaff J, Altman DG; PRISMA Group (2009). The PRISMA Statement. <em>PLoS Med</em>, 6(7):e1000097.</li>
      <li>Page MJ, McKenzie JE, Bossuyt PM, et&nbsp;al. (2021). The PRISMA 2020 statement. <em>BMJ</em>, 372:n71.</li>
      <li>Higgins JPT, Thomas J, Chandler J, et&nbsp;al., eds. (2023). <em>Cochrane Handbook for Systematic Reviews of Interventions</em>, v6.3 or later.</li>
      <li>DerSimonian R, Laird N (1986). Meta-analysis in clinical trials. <em>Control Clin Trials</em>, 7(3):177-88.</li>
      <li>Veroniki AA, Jackson D, Viechtbauer W, et&nbsp;al. (2016). Methods to estimate between-study variance. <em>Res Synth Methods</em>, 7(1):55-79.</li>
      <li>Viechtbauer W. (2010). Conducting meta-analyses in R with the metafor package. <em>J Stat Softw</em>, 36(3):1–48.</li>
      <li>Hartung J, Knapp G; Sidik K, Jonkman JN (2001–2005). Adjustments for random-effects meta-analysis (HKSJ).</li>
      <li>Moed HF. (2010). SNIP: A field-normalized citation impact indicator. <em>J Informetrics</em>, 4(2):265–277.</li>
      <li>González-Pereira B, Guerrero-Bote VP, Moya-Anegón F. (2010). SCImago Journal Rank (SJR). <em>Scientometrics</em>, 82: 517–532.</li>
      <li>Björk BC, Kanto-Karvonen S, Harviainen JT (2020). How frequently are articles in predatory OA journals cited. <em>Publications Research Quarterly</em>, 36(2):158-173.</li>
      <li>Beall J (2012). Predatory publishers are corrupting open access. <em>Nature</em>, 489(7415):179.</li>
      <li>Committee on Publication Ethics (COPE). Principles and resources. <em>COPE</em>.</li>
      <li>Directory of Open Access Journals (DOAJ). Inclusion criteria &amp; transparency principles. <em>DOAJ</em>.</li>
      <li>Sporny M, Longley D, Kellogg G., eds. (2020). <em>JSON-LD 1.1</em>, W3C Recommendation.</li>
      <li>Lewis P, Perez E, Piktus A, et&nbsp;al. (2020). Retrieval-Augmented Generation. <em>NeurIPS</em>.</li>
      <li>Lazer DMJ, Baum MA, Benkler Y, et&nbsp;al. (2018). The science of fake news. <em>Science</em>, 359(6380):1094–1096.</li>
      <li>Kim G (2025). “Verification of Non-scientific Health-Information Claims — GGP-based Hybrid Control.” KR Patent App. 10-2025-0143351 (filed: 2025-10-01).</li>
    </ol>
    <p class="small muted">
      Trademarks: “TERVYX”, “TERVYX Evidence Levels (TEL-5)”, and “Journal-Trust Oracle” are pending/registered trademarks.<br/>
      Version: <strong>v1.0.2</strong> (2025-10-06, KST) — Rename to TERVYX; Silver=PASS; direction unification; 5-tier (TEL-5); J* normalization + BLACK pre-mask; English L-rules; formal DAG propagation; policy_fingerprint in artifacts; revised Figure 1 caption (safety-first monotonicity).<br/>
      arXiv ID: arXiv:2501.XXXXX (pending) | Zenodo DOI: 10.5281/zenodo.17364486 | Contact: moneypuzzler@gmail.com
    </p>
  </section>

</main>
</body>
</html>
